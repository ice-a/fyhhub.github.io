(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{465:function(e,a,n){"use strict";n.r(a);var s=n(11),t=Object(s.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"lerna使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lerna使用"}},[e._v("#")]),e._v(" lerna使用")]),e._v(" "),n("h2",{attrs:{id:"lerna核心操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lerna核心操作"}},[e._v("#")]),e._v(" lerna核心操作")]),e._v(" "),n("p",[e._v("不知道的命令，建议lerna xx -h")]),e._v(" "),n("ul",[n("li",[n("p",[n("strong",[e._v("项目初始化")])]),e._v(" "),n("ol",[n("li",[n("code",[e._v("npm init -y")]),e._v("初始化")]),e._v(" "),n("li",[n("code",[e._v("npm i lerna -D")])]),e._v(" "),n("li",[n("code",[e._v("lerna init")])])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("创建package")])]),e._v(" "),n("ol",[n("li",[n("code",[e._v("lerna create")]),e._v(" 创建package")]),e._v(" "),n("li",[n("code",[e._v("lerna add")]),e._v(" 安装依赖")]),e._v(" "),n("li",[n("code",[e._v("lerna link")]),e._v(" 链接依赖")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("开发和测试")])]),e._v(" "),n("ol",[n("li",[n("code",[e._v("lerna exec")]),e._v(" 执行shell脚本")]),e._v(" "),n("li",[n("code",[e._v("lerna run")]),e._v(" 执行"),n("code",[e._v("npm scripts")])]),e._v(" "),n("li",[n("code",[e._v("lerna clean")]),e._v(" 清空所有依赖node_modules")]),e._v(" "),n("li",[n("code",[e._v("lerna bootstrap")]),e._v(" 重装依赖")])])]),e._v(" "),n("li",[n("p",[n("strong",[e._v("发布上线")])]),e._v(" "),n("ol",[n("li",[n("code",[e._v("lerna version")]),e._v(" 提升版本号")]),e._v(" "),n("li",[n("code",[e._v("lerna changed")]),e._v(" 查看当前版本与上版本的所有变更")]),e._v(" "),n("li",[n("code",[e._v("lerna diff")]),e._v(" 查看diff")]),e._v(" "),n("li",[n("code",[e._v("lerna publish")]),e._v(" 发布")])])])]),e._v(" "),n("h3",{attrs:{id:"注意点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意点"}},[e._v("#")]),e._v(" 注意点")]),e._v(" "),n("ul",[n("li",[e._v("lerna link：有两个库"),n("code",[e._v("A")]),e._v("和"),n("code",[e._v("B")]),e._v(",如果"),n("code",[e._v("A")]),e._v("引用"),n("code",[e._v("B包")]),e._v(", 需要在"),n("code",[e._v("A")]),e._v("的package.json中的"),n("code",[e._v("dependencies")]),e._v("提前声明好，然后再执行"),n("code",[e._v("lerna link")])]),e._v(" "),n("li",[e._v("lerna exec: "),n("code",[e._v("lerna exec -- rm -rf node_modules")]),e._v("是在每个packages中执行的，而不是项目根目录")])]),e._v(" "),n("h2",{attrs:{id:"lerna分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lerna分析"}},[e._v("#")]),e._v(" lerna分析")]),e._v(" "),n("p",[n("strong",[e._v("本地开发依赖最佳实践")])]),e._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"dependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[e._v('"@leek-cli-dev/utils"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"file:../utils"')]),e._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 通过file: 可以让我们不需要npm link 直接可以本地开发")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);