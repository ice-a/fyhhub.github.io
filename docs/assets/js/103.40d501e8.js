(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{506:function(t,s,a){"use strict";a.r(s);var n=a(11),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dns预解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns预解析"}},[t._v("#")]),t._v(" DNS预解析")]),t._v(" "),a("h2",{attrs:{id:"回顾-dns解析过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#回顾-dns解析过程"}},[t._v("#")]),t._v(" 回顾：DNS解析过程")]),t._v(" "),a("p",[a("strong",[t._v("DNS")]),t._v(" ，全称 "),a("strong",[t._v("Domain Name System")]),t._v(" 。采用 "),a("strong",[t._v("client/server")]),t._v(" 模式，"),a("strong",[t._v("DNS client")]),t._v(" 发出查询请求，"),a("strong",[t._v("DNS server")]),t._v(" 响应请求。"),a("strong",[t._v("DNS client")]),t._v(" 通过查询 "),a("strong",[t._v("DNS server")]),t._v(" 获得主机的 "),a("strong",[t._v("IP 地址")]),t._v("，进而完成后续的 "),a("strong",[t._v("TCP/IP")]),t._v(" 通信过程。")]),t._v(" "),a("h3",{attrs:{id:"dns-域名组成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns-域名组成"}},[t._v("#")]),t._v(" DNS 域名组成")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-d5aab5cbd37ede88a27a28d165abe1fc_1440w.jpg?source=1940ef5c",alt:""}})]),t._v(" "),a("hr"),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-0d8ed8870fa1fc4e5f0275e08b510444_1440w.jpg?source=1940ef5c",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"dns对www-baidu-com解析过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns对www-baidu-com解析过程"}},[t._v("#")]),t._v(" DNS对www.baidu.com解析过程")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-2e3c4a5086b77c9dc2fa88c55e12e689_1440w.jpg?source=1940ef5c",alt:""}})]),t._v(" "),a("p",[t._v("以上过程都是在没有"),a("code",[t._v("浏览器缓存")]),t._v("，"),a("code",[t._v("系统缓存")]),t._v("，"),a("code",[t._v("路由器花奴才能")]),t._v(",")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("DNS 客户端")]),t._v("向"),a("strong",[t._v("本地域名服务器")]),t._v("发送请求，查询 www.baidu.com 主机的 IP 地址；")])]),t._v(" "),a("li",[a("p",[t._v("本地域名服务器查询数据库，发现没有域名为 www.baidu.com 的主机，于是将请求发送给根域名服务器；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("根域名服务器")]),t._v("查询数据库，发现没有这个主机域名记录，但是根域名服务器知道 "),a("strong",[t._v("com 域名服务器")]),t._v("可以解析这个域名，于是将"),a("strong",[t._v("com 域名服务器")]),t._v("的 IP 地址返回给"),a("strong",[t._v("本地域名服务器")]),t._v("；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("本地域名服务器")]),t._v("向 "),a("strong",[t._v("com 域名服务器")]),t._v("查询 www.baidu.com 主机的 IP 地址；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("com 域名服务器")]),t._v("查询数据库，也没有相关记录，但是知道 baidu.com 域名服务器可以解析这个域名，于是将 baidu.com 域名服务器的 IP 地址返回给本地域名服务器；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("本地域名服务器")]),t._v("再向 "),a("strong",[t._v("baidu.com 域名服务器")]),t._v("查询 www.baidu.com 主机 IP 地址；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("baidu.com域名服务器")]),t._v("查询数据库，也没有相关记录，但是知道 "),a("strong",[t._v("www.baidu.com 域名服务器")]),t._v("可以解析这个域名，于是将 www.baidu.com 的域名服务器 IP 地址返回给本地域名服务器；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("本地域名服务器")]),t._v("向 "),a("strong",[t._v("www.baidu.com 域名服务器")]),t._v("查询 www.baidu.com 主机的 IP 地址；")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("www.baidu.com域名服务器")]),t._v("查询数据库，发现有主机域名记录，于是给"),a("strong",[t._v("本地域名服务器")]),t._v("返回 www.baidu.com 对应的 IP 地址；")])]),t._v(" "),a("li",[a("p",[t._v("最后"),a("strong",[t._v("本地域名服务器")]),t._v("将 www.baidu.com 的 IP 地址返回给客户端，整个解析过程完成。")])])]),t._v(" "),a("h2",{attrs:{id:"dns预解析优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns预解析优化"}},[t._v("#")]),t._v(" DNS预解析优化")]),t._v(" "),a("p",[a("strong",[t._v("DNS Prefetching 能够提前解析域名")]),t._v("，当用户去访问该域名时就能直接获取到ip，减少等待时间，提升用户体验")]),t._v(" "),a("p",[a("strong",[t._v("如果想对页面中没有出现的域进行预获取，那么就要使用显示的 DNS Prefetch 了")])]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 用meta信息来告知浏览器, 当前页面要做DNS预解析 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('\x3c!-- content="on" or content="off" --\x3e')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x-dns-prefetch-control"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 在页面header中使用link标签来强制对DNS预解析 --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//www.zhix.net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//api.share.zhix.net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//bdimg.share.zhix.net"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("p",[a("strong",[t._v("注意：dns-prefetch需慎用，多页面重复DNS预解析会增加重复DNS查询次数")])]),t._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.zhihu.com/question/23042131/answer/66571369",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNS解析的过程是什么，求详细的？"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/goloving/p/9368965.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNS预解析dns-prefetch提升页面载入速度优化前端性能"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);